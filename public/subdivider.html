<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>LANDORIX • Subdivider</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100vh;background:#fff;color:#000;overflow:hidden;font-family:Helvetica,Arial,sans-serif}
#card{
  position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
  background:#fff;padding:80px 70px;border-radius:40px;box-shadow:0 50px 120px rgba(0,0,0,.2);
  width:560px;max-width:96vw;max-height:96vh;overflow-y:auto;z-index:100;
  text-align:center;
}
h1{font-size:48px;font-weight:900;margin-bottom:48px}
select,input,button{
  width:100%;padding:22px;margin:18px 0;border:none;border-radius:20px;font-size:20px;
}
select,input{background:rgba(0,0,0,.05)}
button{
  background:#000;color:#fff;font-weight:700;cursor:pointer;
  box-shadow:0 15px 40px rgba(0,0,0,.3);margin-top:32px;
}
button:hover{transform:translateY(-4px)}
#scene{position:fixed;inset:0;opacity:0;transition:opacity 1s}
#scene.active{opacity:1}
#info{
  position:fixed;bottom:40px;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,.85);color:#fff;padding:18px 48px;border-radius:60px;
  font-size:32px;font-weight:900;z-index:10;
}
#reset{position:fixed;inset:0;cursor:pointer;z-index:5}
@media(max-width:768px){
  #card{padding:60px 40px;width:94vw}
  h1{font-size:40px}
  select,input,button{font-size:18px;padding:20px}
}
</style>
</head>
<body>

<div id="card">
  <h1>SUBDIVIDER</h1>
  <select id="zone">
    <option value="" disabled selected>Select Zoning</option>
    <option value="CR-1">CR-1 • 20,000 sq ft (80 ft min width)</option>
    <option value="CR-1A">CR-1A • 1 acre (100 ft min width)</option>
    <option value="GR">GR • 1.25 acres (100 ft min width)</option>
    <option value="SH">SH • 2 acres (100 ft min width)</option>
    <option value="SR">SR • 3.3 acres (no min width)</option>
  </select>
  <input id="width" type="number" placeholder="Parcel Width (feet)" min="1">
  <input id="depth" type="number" placeholder="Parcel Depth (feet)" min="1">
  <button onclick="subdivide()">SUBDIVIDE</button>
</div>

<div id="scene"></div>
<div id="info"></div>
<div id="reset" onclick="reset()"></div>

<script src="https://unpkg.com/three@0.168.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.168.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://unpkg.com/@tweenjs/tween.js@18.6.4/dist/tween.umd.js"></script>
<script>
const zones={"CR-1":{area:20000,width:80},"CR-1A":{area:43560,width:100},"GR":{area:54450,width:100},"SH":{area:87120,width:100},"SR":{area:143748,width:null}};
let scene,camera,renderer,controls,parcelGroup;
function init3D(){scene=new THREE.Scene();scene.background=new THREE.Color(0xffffff);camera=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,.1,10000);camera.position.set(1200,900,1200);renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);document.getElementById('scene').appendChild(renderer.domElement);controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=true;controls.minDistance=500;controls.maxDistance=3000;scene.add(new THREE.AmbientLight(0xffffff,.8));scene.add(((d=new THREE.DirectionalLight(0xffffff,1)).position.set(700,1400,700),d));parcelGroup=new THREE.Group();scene.add(parcelGroup);animate()}
function animate(){requestAnimationFrame(animate);controls.update();renderer.render(scene,camera)}
function subdivide(){const z=document.getElementById('zone').value,w=+document.getElementById('width').value,d=+document.getElementById('depth').value;if(!z||!w||!d)return alert("Fill all fields");document.getElementById('card').style.opacity=0;setTimeout(()=>{document.getElementById('card').style.display='none';document.getElementById('scene').classList.add('active');init3D();createParcel(w,d,zones[z])},600)}
function createParcel(w,d,r){parcelGroup.clear();const best=calc(w,d,r).lots>=calc(d,w,r).lots?{w,d}:{w:d,d:w};const g=new THREE.BoxGeometry(best.w,70,best.d),o=new THREE.Mesh(g,new THREE.MeshBasicMaterial({color:0x000000,transparent:true,opacity:.92}));parcelGroup.add(o);parcelGroup.add(new THREE.LineSegments(new THREE.EdgesGeometry(g),new THREE.LineBasicMaterial({color:0x000000,linewidth:9})));let x=-best.w/2,lots=0;while(x<best.w/2){const rw=best.w/2-x,minW=r.width||r.area/best.d;if(rw<minW)break;const lw=Math.max(minW,r.area/best.d);if(lw*best.d<r.area*.9)break;const lg=new THREE.BoxGeometry(lw,72,best.d),lot=new THREE.Mesh(lg,new THREE.MeshBasicMaterial({color:0x000000,transparent:true,opacity:.04}));lot.position.set(x+lw/2,1,0);parcelGroup.add(lot);parcelGroup.add(new THREE.LineSegments(new THREE.EdgesGeometry(lg),new THREE.LineBasicMaterial({color:0x000000,linewidth:5})));x+=lw;lots++}
document.getElementById('info').textContent=`${lots} LOTS • ${(best.w*best.d/43560).toFixed(2)} ACRES`;parcelGroup.position.y=-350;new TWEEN.Tween(parcelGroup.position).to({y:0},2200).easing(TWEEN.Easing.Elastic.Out).start()}
function calc(w,d,r){let l=0,x=0;while(x<w){const rem=w-x,min=r.width||r.area/d;if(rem<min)break;const lw=Math.max(min,r.area/d);if(lw*d<r.area*.9)break;x+=lw;l++}return{lots:l}}
function reset(){document.getElementById('scene').innerHTML='';document.getElementById('scene').classList.remove('active');document.getElementById('card').style.display='block';document.getElementById('card').style.opacity=1;document.getElementById('info').textContent=''}
</script>
</body>
</html>
